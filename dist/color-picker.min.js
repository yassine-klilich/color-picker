const ColorParser=function(){let t={aliceblue:{h:208,s:6,v:100},antiquewhite:{h:34,s:14,v:98},aqua:{h:180,s:100,v:100},aquamarine:{h:160,s:50,v:100},azure:{h:180,s:6,v:100},beige:{h:60,s:10,v:96},bisque:{h:33,s:23,v:100},black:{h:0,s:0,v:0},blanchedalmond:{h:36,s:20,v:100},blue:{h:240,s:100,v:100},blueviolet:{h:271,s:81,v:89},brown:{h:0,s:75,v:65},burlywood:{h:34,s:39,v:87},cadetblue:{h:182,s:41,v:63},chartreuse:{h:90,s:100,v:100},chocolate:{h:25,s:86,v:82},coral:{h:16,s:69,v:100},cornflowerblue:{h:219,s:58,v:93},cornsilk:{h:48,s:14,v:100},crimson:{h:348,s:91,v:86},cyan:{h:180,s:100,v:100},darkblue:{h:240,s:100,v:55},darkcyan:{h:180,s:100,v:55},darkgoldenrod:{h:43,s:94,v:72},darkgray:{h:0,s:0,v:.6627450980392157},darkgrey:{h:0,s:0,v:.6627450980392157},darkgreen:{h:120,s:100,v:39},darkkhaki:{h:56,s:43,v:74},darkmagenta:{h:300,s:100,v:55},darkolivegreen:{h:82,s:56,v:42},darkorange:{h:33,s:100,v:100},darkorchid:{h:280,s:75,v:80},darkred:{h:0,s:100,v:55},darksalmon:{h:15,s:48,v:91},darkseagreen:{h:120,s:24,v:74},darkslateblue:{h:248,s:56,v:55},darkslategray:{h:180,s:41,v:31},darkslategrey:{h:180,s:41,v:31},darkturquoise:{h:181,s:100,v:82},darkviolet:{h:282,s:100,v:83},deeppink:{h:328,s:92,v:100},deepskyblue:{h:195,s:100,v:100},dimgray:{h:0,s:0,v:.4117647058823529},dimgrey:{h:0,s:0,v:.4117647058823529},dodgerblue:{h:210,s:88,v:100},firebrick:{h:0,s:81,v:70},floralwhite:{h:40,s:6,v:100},forestgreen:{h:120,s:76,v:55},fuchsia:{h:300,s:100,v:100},gainsboro:{h:0,s:0,v:.8627450980392157},ghostwhite:{h:240,s:3,v:100},gold:{h:51,s:100,v:100},goldenrod:{h:43,s:85,v:85},gray:{h:0,s:0,v:.5019607843137255},grey:{h:0,s:0,v:.5019607843137255},green:{h:120,s:100,v:50},greenyellow:{h:84,s:82,v:100},honeydew:{h:120,s:6,v:100},hotpink:{h:330,s:59,v:100},"indianred ":{h:0,s:55,v:80},"indigo ":{h:275,s:100,v:51},ivory:{h:60,s:6,v:100},khaki:{h:54,s:42,v:94},lavender:{h:240,s:8,v:98},lavenderblush:{h:340,s:6,v:100},lawngreen:{h:90,s:100,v:99},lemonchiffon:{h:54,s:20,v:100},lightblue:{h:195,s:25,v:90},lightcoral:{h:0,s:47,v:94},lightcyan:{h:180,s:12,v:100},lightgoldenrodyellow:{h:60,s:16,v:98},lightgray:{h:0,s:0,v:.8274509803921568},lightgrey:{h:0,s:0,v:.8274509803921568},lightgreen:{h:120,s:39,v:93},lightpink:{h:351,s:29,v:100},lightsalmon:{h:17,s:52,v:100},lightseagreen:{h:177,s:82,v:70},lightskyblue:{h:203,s:46,v:98},lightslategray:{h:210,s:22,v:60},lightslategrey:{h:210,s:22,v:60},lightsteelblue:{h:214,s:21,v:87},lightyellow:{h:60,s:12,v:100},lime:{h:120,s:100,v:100},limegreen:{h:120,s:76,v:80},linen:{h:30,s:8,v:98},magenta:{h:300,s:100,v:100},maroon:{h:0,s:100,v:50},mediumaquamarine:{h:160,s:50,v:80},mediumblue:{h:240,s:100,v:80},mediumorchid:{h:288,s:60,v:83},mediumpurple:{h:260,s:48,v:85},mediumseagreen:{h:147,s:66,v:70},mediumslateblue:{h:249,s:56,v:93},mediumspringgreen:{h:157,s:100,v:98},mediumturquoise:{h:178,s:66,v:82},mediumvioletred:{h:322,s:89,v:78},midnightblue:{h:240,s:78,v:44},mintcream:{h:150,s:4,v:100},mistyrose:{h:6,s:12,v:100},moccasin:{h:38,s:29,v:100},navajowhite:{h:36,s:32,v:100},navy:{h:240,s:100,v:50},oldlace:{h:39,s:9,v:99},olive:{h:60,s:100,v:50},olivedrab:{h:80,s:75,v:56},orange:{h:39,s:100,v:100},orangered:{h:16,s:100,v:100},orchid:{h:302,s:49,v:85},palegoldenrod:{h:55,s:29,v:93},palegreen:{h:120,s:39,v:98},paleturquoise:{h:180,s:26,v:93},palevioletred:{h:340,s:48,v:85},papayawhip:{h:37,s:16,v:100},peachpuff:{h:28,s:27,v:100},peru:{h:30,s:69,v:80},pink:{h:350,s:25,v:100},plum:{h:300,s:28,v:87},powderblue:{h:187,s:23,v:90},purple:{h:300,s:100,v:50},red:{h:0,s:100,v:100},rosybrown:{h:0,s:24,v:74},royalblue:{h:225,s:71,v:88},saddlebrown:{h:25,s:86,v:55},salmon:{h:6,s:54,v:98},sandybrown:{h:28,s:61,v:96},seagreen:{h:146,s:67,v:55},seashell:{h:25,s:7,v:100},sienna:{h:19,s:72,v:63},silver:{h:0,s:0,v:.7529411764705882},skyblue:{h:197,s:43,v:92},slateblue:{h:248,s:56,v:80},slategray:{h:210,s:22,v:56},slategrey:{h:210,s:22,v:56},snow:{h:0,s:2,v:100},springgreen:{h:150,s:100,v:100},steelblue:{h:207,s:61,v:71},tan:{h:34,s:33,v:82},teal:{h:180,s:100,v:50},thistle:{h:300,s:12,v:85},tomato:{h:9,s:72,v:100},turquoise:{h:174,s:71,v:88},violet:{h:300,s:45,v:93},wheat:{h:39,s:27,v:96},white:{h:0,s:0,v:1},whitesmoke:{h:0,s:0,v:.9607843137254902},yellow:{h:60,s:100,v:100},yellowgreen:{h:80,s:76,v:80}},e=Object.freeze({parse:function(e){if(arguments.length,0==arguments.length)throw Error("COLOR_CONVERT_ERR:: Failed to execute 'parse' on 'ColorParser': 1 argument required, but only 0 present");if(void 0==e)throw Error("COLOR_CONVERT_ERR:: color is undefined");if("string"==typeof e||e instanceof String){if(e=e.trim(),/^(rgba?)/i.test(e))return function t(e){let i,s,n,o,l=/rgba?\(\s*(\d+)\s+(\d+)\s+(\d+)\s*(\s+(0?(\.\d+)?|1(\.0*)?)\s*)?\)/i;if(l.test(e)){let r=e.split(l).filter(t=>!isNaN(t)&&""!=t&&null!=t);if(i=parseInt(r[0]),s=parseInt(r[1]),n=parseInt(r[2]),o=parseFloat(r[3]),i>255)throw RangeError(`COLOR_CONVERT_ERR:: '${e}' --> ${i} has an invalid red color, it must be an interger between 0 and 255`);if(s>255)throw RangeError(`COLOR_CONVERT_ERR:: '${e}' --> ${s} has an invalid green color, it must be an interger between 0 and 255`);if(n>255)throw RangeError(`COLOR_CONVERT_ERR:: '${e}' --> ${n} has an invalid blue color, it must be an interger between 0 and 255`);let{h,s:a,v:u}=Color.prototype.RGBtoHSV(i,s,n);return{h,s:a,v:u,a:isNaN(o)?1:o}}throw SyntaxError(`COLOR_CONVERT_ERR:: '${e}' is an invalid RGB format`)}(e);if(/^(#)/i.test(e))return function t(e){let i=Color.prototype.HEXtoRGBA(e);if(i){let{r:s,g:n,b:o,a:l}=i,{h:r,s:h,v:a}=Color.prototype.RGBtoHSV(s,n,o);return{h:r,s:h,v:a,a:l}}throw Error(`COLOR_CONVERT_ERR:: '${e}' is an invalid HEX format`)}(e);let i=t[e.toLowerCase()];if(void 0!=i)return{...i,a:1}}else{let{r:s,g:n,b:o,a:l}=e;if(s>=0&&s<=255&&n>=0&&n<=255&&o>=0&&o<=255&&l>=0&&l<=1){let{h:r,s:h,v:a}=Color.prototype.RGBtoHSV(s,n,o);return{h:r,s:h,v:a,a:l}}throw Error("COLOR_CONVERT_ERR:: the provided RGB object has invalid values, please make sure red, green, blue are between 0 and 255 and alpha value is between 0 and 1")}throw Error("COLOR_CONVERT_ERR:: Color is not in RGB or HEX format or a named color")}});return e}(),TOP="t",BOTTOM="b",LEFT="l",RIGHT="r",RGB="rgb",HSV="hsv",HSL="hsl",HEX="hex",DefaultOptions=Object.freeze({target:null,container:null,position:"b",positionFlipOrder:"rltb",representation:"rgb",color:"red",closeKey:"Escape",closeOnScroll:!0,closeOnResize:!1,onInit(){},onOpen(){},onClose(){},onInput(){},onChange(){},onCopy(){},onRepresentationChange(){}});function ColorPicker(t){let e=_util_.buildOptions(DefaultOptions,t),{target:i}=e,s={},n=!1,o=e.representation;this.__c=null,Object.defineProperty(this,"options",{value:e}),Object.defineProperty(this,"DOM",{get:()=>s}),Object.defineProperty(this,"isOpen",{get:()=>n,set:t=>n=t}),Object.defineProperty(this,"currentRepresentation",{get:()=>o,set:t=>{o=t,_gui_.updateInputs.call(this),this.options.onRepresentationChange.call(this)}}),Object.defineProperty(this,"color",{get:function(){switch(this.currentRepresentation){case"rgb":{let{r:t,g:e,b:i}=this.__c.rgb;return{r:Math.round(t),g:Math.round(e),b:Math.round(i),a:this.__c.a}}case"hsv":{let{h:s,s:n,v:o}=this.__c.hsv;return{h:Math.round(s),s:Math.round(n),l:Math.round(o),a:this.__c.a}}case"hsl":{let{h:l,s:r,l:h}=this.__c.hsl;return{h:Math.round(l),s:Math.round(r),l:Math.round(h),a:this.__c.a}}case"hex":return this.getHEX()}},set:function(t){let{h:e,s:i,v:s,a:n}=ColorParser.parse(t);this.__c=new Color(e,i,s,n),_gui_.updateGUI.call(this)}}),i&&i.addEventListener("click",t=>_event_.onClickTarget.call(this,t)),_gui_.initDOM.call(this),this.color=this.options.color}ColorPicker.prototype.open=function(){this.options.container?_gui_.attachToContainer.call(this):_gui_.attachToBody.call(this),this.options.onOpen.call(this)},ColorPicker.prototype.close=function(){this.__dc||(_gui_.detachFromBody.call(this),this.options.onClose.call(this)),this.__dc=!1},ColorPicker.prototype.getRGB=function(){return{...this.__c.toRGB(),a:this.__c.a}},ColorPicker.prototype.getHSV=function(){let{h:t,s:e,v:i}=this.__c.hsv;return{h:Math.round(t),s:Math.round(e),v:Math.round(i),a:this.__c.a}},ColorPicker.prototype.getHSL=function(){let{h:t,s:e,l:i}=this.__c.toHSL();return{h:Math.round(t),s:Math.round(e),l:Math.round(i),a:this.__c.a}},ColorPicker.prototype.getHEX=function(){return this.__c.toHEX()},ColorPicker.prototype.copyIcon="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='-201 290.3 16 16' width='16' height='16'%3E%3Cpath d='M-199.1 301.3v-6.7c0-2 1.6-3.7 3.7-3.7h4.3c.8 0 1.5.5 1.7 1.2H-195c-1.6.1-2.9 1.4-2.9 3.1v7.9c-.7-.3-1.2-1-1.2-1.8zm4.3 4.3c-1 0-1.8-.8-1.8-1.8v-8.6c0-1 .8-1.8 1.8-1.8h6.1c1 0 1.8.8 1.8 1.8v8.6c0 1-.8 1.8-1.8 1.8h-6.1zm6.7-1.8v-8.6c0-.3-.3-.6-.6-.6h-6.1c-.3 0-.6.3-.6.6v8.6c0 .3.3.6.6.6h6.1c.3 0 .6-.3.6-.6z' fill='%23bcbcbc'/%3E%3C/svg%3E\")";const _util_={buildOptions:function(t,e){let i={},s=Object.keys(t);for(let n=0;n<s.length;n++){let o=s[n];!0==e.hasOwnProperty(o)?i[o]=e[o]:i[o]=t[o]}return i},lt:function(t,e){return t<e},gt:function(t,e){return t>e},add:function(t,e){return t+e},sub:function(t,e){return t-e},hexPad2:function(t){return t.toString(16).padStart(2,"0")}},_core_={getCursorPosition:function(t,e){let i=this.DOM.palette.getBoundingClientRect(),s=t-i.left,n=e-i.top;return s<0?s=0:s>i.width&&(s=i.width),n<0?n=0:n>i.height&&(n=i.height),{x:s,y:n}},updateHEXColor:function(){let{r:t,g:e,b:i}=this.__c.rgb=this.__c.toRGB();this.__c.hex=this.__c.RGBAtoHEX(t,e,i,this.__c.a)},getColorText:function(){switch(this.currentRepresentation){case"rgb":let{r:t,g:e,b:i}=this.__c.rgb;return`rgba(${Math.round(t)}, ${Math.round(e)}, ${Math.round(i)}, ${this.__c.a})`;case"hsv":{let{h:s,s:n,v:o}=this.__c.hsv;return`hsva(${Math.round(s)}, ${Math.round(n)}%, ${Math.round(o)}%, ${this.__c.a})`}case"hsl":{let{h:l,s:r,l:h}=this.__c.hsl;return`hsla(${Math.round(l)}, ${Math.round(r)}%, ${Math.round(h)}%, ${this.__c.a})`}case"hex":return this.getHEX()}},getCaretPosition:function(t){let e=t.selectionStart,i=t.value.length;return e>i&&(e=i),e},getPositionAxis:function(){let{target:t,position:e,positionFlipOrder:i}=this.options,s=e,n=t.getBoundingClientRect(),o=this.DOM.overlayWrapper.getBoundingClientRect(),l=document.documentElement.scrollTop,r=document.documentElement.scrollLeft,h=_core_.enoughSpace(()=>l+n.top,()=>n.top,o.height+6),a=_core_.enoughSpace(()=>_core_.getPageHeight()-(l+n.top+n.height),()=>window.innerHeight-(n.top+n.height),o.height+6),u=_core_.enoughSpace(()=>r+n.left,()=>n.left,o.width+6),c=_core_.enoughSpace(()=>_core_.getPageWidth()-(r+n.left+n.width),()=>window.innerWidth-(n.left+n.width),o.width+6),d={t:h,b:a,l:u,r:c},p="";for(let $=0;$<i.length;$++)p+=i[$]+d[i[$]];let v="",g="";for(let b=1;b<p.length;b+=2){let _=p[b];2==_&&(v+=p[b-1]),1==_&&(g+=p[b-1])}""!=v?!1==v.includes(s)&&(s=v[0]):""!=g?!1==g.includes(s)&&(s=g[0]):s="b";let C=0,f=0;switch(s){case"t":f=n.top-o.height-6,C=n.left+n.width/2-o.width/2;break;case"b":f=n.top+n.height+6,C=n.left+n.width/2-o.width/2;break;case"l":f=n.top+n.height/2-o.height/2,C=n.left-o.width-6;break;case"r":f=n.top+n.height/2-o.height/2,C=n.left+n.width+6}return window.innerWidth<C+o.width&&(C-=C+o.width-window.innerWidth),{x:C,y:f}},getPageHeight:function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},getPageWidth:function(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)},enoughSpace:function(t,e,i){return t()>=i?e()>=i?2:1:0},setPositionAxis:function(t){let{x:e,y:i}=t;this.DOM.overlayWrapper.style.top=`${i}px`,this.DOM.overlayWrapper.style.left=`${e}px`}},_gui_={initDOM:function(){let t=_gui_.createElement("div",["cp-overlay-wrapper"]),e=_gui_.createElement("div",["cp-wrapper"]);t.appendChild(e),e.appendChild(_gui_.buildPaletteColor.call(this)),e.appendChild(_gui_.buildColorSettings.call(this)),t.addEventListener("click",t=>t.stopPropagation()),this.DOM.overlayWrapper=t,this.__onKeyUpClose=_event_.onKeyUpClose.bind(this),this.__onResizeScrollWindow=_event_.onResizeScrollWindow.bind(this),this.__onClickClose=this.close.bind(this),this.options.container&&_gui_.attachToContainer.call(this),this.options.onInit.call(this)},updateGUI:function(){_gui_.updateCursorThumb.call(this),_gui_.updateInputs.call(this),_gui_.updateColorPreview.call(this,!1),_gui_.updateHueThumb.call(this),_gui_.updateOpacityThumb.call(this)},buildPaletteColor:function(){let t=_gui_.createElement("div",["cp-palette-wrapper"]),e=_gui_.createElement("div",["cp-palette"]),i=_gui_.createElement("div",["cp-cursor"]);return t.appendChild(e),t.appendChild(i),this.__onMouseDownCursor=_event_.onMouseDownCursor.bind(this),this.__onMouseUpCursor=_event_.onMouseUpCursor.bind(this),this.__onMouseMoveCursor=_event_.onMouseMoveCursor.bind(this),t.addEventListener("mousedown",this.__onMouseDownCursor),this.DOM.palette=e,this.DOM.cursor=i,t},buildColorSettings:function(){let t=_gui_.createElement("div",["cp-color-settings"]);return t.appendChild(_gui_.buildCopyColor.call(this)),t.appendChild(_gui_.buildColorPreview.call(this)),t.appendChild(_gui_.buildColorSliders.call(this)),t.appendChild(_gui_.buildColorInputs.call(this)),t},buildColorInputs:function(){let t=_gui_.createElement("div",["cp-color-model-wrapper"]),e=_gui_.createElement("div",["cp-color-model"]),i=_gui_.createElement("button",["cp-color-model-switch"]);return i.style.setProperty("background-image","url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='-203 292.3 12 12'%3E%3Cpath fill='%23bcbcbc' d='m-200.5 300.9 1.2-1.2 2.3 2.3 2.3-2.3 1.2 1.2-3.5 3.4-3.5-3.4zM-197 292.3l3.5 3.4-1.2 1.2-2.3-2.3-2.3 2.3-1.2-1.2 3.5-3.4z'/%3E%3C/svg%3E\")"),t.appendChild(e),t.appendChild(i),i.addEventListener("click",_event_.onClickInputsSwitch.bind(this)),this.DOM.inputsWrapper=e,t},buildInput:function(){let{inputsWrapper:t}=this.DOM;t.innerHTML="","hex"==this.currentRepresentation?t.appendChild(_gui_.buildHEXInput.call(this)):t.appendChild(_gui_.buildQuadrupedInput.call(this))},buildHEXInput:function(){let t=_gui_.createElement("div",["cp-hex-input"]),e=_gui_.createElement("input",["cp-color-input"]),i=_gui_.createElement("label",["cp-color-model-label"]);return e.setAttribute("type","text"),i.textContent="HEX",t.appendChild(e),t.appendChild(i),e.addEventListener("focus",_event_.onFocusInput.bind(this)),e.addEventListener("keydown",_event_.onKeyDownInputHEX.bind(this)),e.addEventListener("input",_event_.onInputHEX.bind(this)),e.addEventListener("change",_event_.onChangeInputHEX.bind(this)),this.DOM.inputHEX=e,t},buildQuadrupedInput:function(){let t=_gui_.createElement("div",["cp-input-wrapper"]),e=_gui_.createElement("input",["cp-color-input"]),i=_gui_.createElement("input",["cp-color-input"]),s=_gui_.createElement("input",["cp-color-input"]),n=_gui_.createElement("input",["cp-color-input"]),o=_gui_.createElement("label",["cp-color-model-label"]),l=_gui_.createElement("label",["cp-color-model-label"]),r=_gui_.createElement("label",["cp-color-model-label"]),h=_gui_.createElement("label",["cp-color-model-label"]);e.setAttribute("type","text"),i.setAttribute("type","text"),s.setAttribute("type","text"),n.setAttribute("type","text");let a=this.currentRepresentation.toUpperCase();return o.textContent=a[0],l.textContent=a[1],r.textContent=a[2],h.textContent="A",t.appendChild(e),t.appendChild(i),t.appendChild(s),t.appendChild(n),t.appendChild(o),t.appendChild(l),t.appendChild(r),t.appendChild(h),e.addEventListener("focus",_event_.onFocusInput.bind(this)),e.addEventListener("keydown",_event_.onKeyDownInputA.bind(this)),e.addEventListener("input",_event_.onInputA.bind(this)),e.addEventListener("change",_event_.onChangeInputA.bind(this)),i.addEventListener("focus",_event_.onFocusInput.bind(this)),i.addEventListener("keydown",_event_.onKeyDownInputB.bind(this)),i.addEventListener("input",_event_.onInputB.bind(this)),i.addEventListener("change",_event_.onChangeInputB.bind(this)),s.addEventListener("focus",_event_.onFocusInput.bind(this)),s.addEventListener("keydown",_event_.onKeyDownInputC.bind(this)),s.addEventListener("input",_event_.onInputC.bind(this)),s.addEventListener("change",_event_.onChangeInputC.bind(this)),n.addEventListener("keydown",_event_.onKeyDownAlphaInput.bind(this)),n.addEventListener("input",_event_.onKeyUpAlphaInput.bind(this)),n.addEventListener("change",_event_.onChangeAlphaInput.bind(this)),this.DOM.inputA=e,this.DOM.inputB=i,this.DOM.inputC=s,this.DOM.inputAlpha=n,t},updateOpacityThumb:function(){let{opacitySlider:t,opacityThumb:e}=this.DOM;e.style.translate=`${this.__c.a*t.offsetWidth}px`},updateHueThumb:function(){let{hueThumb:t,hueSlider:e}=this.DOM;t.style.translate=`${this.__c.hsv.h/360*e.offsetWidth}px`},setQuadrupedValue:function(t,e,i){this.DOM.inputA.value=t,this.DOM.inputB.value=e,this.DOM.inputC.value=i,this.DOM.inputAlpha.value=parseFloat(this.__c.a.toFixed(2))},updateHEXInput:function(){this.DOM.inputHEX.value=this.__c.hex},updateSettingsView:function(){_gui_.updateInputsValue.call(this),_gui_.updateColorPreview.call(this,!0)},updateInputs:function(){_gui_.buildInput.call(this),_gui_.updateInputsValue.call(this)},updateInputsValue:function(){switch(this.currentRepresentation){case"rgb":{let{r:t,g:e,b:i}=this.__c.rgb=this.__c.toRGB();_gui_.setQuadrupedValue.call(this,Math.round(t),Math.round(e),Math.round(i))}break;case"hsv":{let{h:s,s:n,v:o}=this.__c.hsv;_gui_.setQuadrupedValue.call(this,`${Math.round(s)}\xb0`,`${Math.round(n)}%`,`${Math.round(o)}%`)}break;case"hsl":{let{h:l,s:r,l:h}=this.__c.hsl=this.__c.toHSL();_gui_.setQuadrupedValue.call(this,`${Math.round(l)}\xb0`,`${Math.round(r)}%`,`${Math.round(h)}%`)}break;case"hex":_core_.updateHEXColor.call(this),_gui_.updateHEXInput.call(this)}},updateColorPreview:function(t){let e=this.__c.a,i=this.__c.toHSL(),{palette:s,opacitySlider:n,colorPreview:o}=this.DOM,l=`hsl(${i.h}deg 100% 50% / 1)`;s.style.backgroundImage=`linear-gradient(180deg, transparent 0%, rgba(0,0,0,1) 100%), linear-gradient(90deg, rgba(255,255,255,1) 0%, ${l} 100%)`;let r=`hsl(${i.h}, ${i.s}%, ${i.l}%)`;n.style.setProperty("background-image",`linear-gradient(90deg, transparent, ${r})`),o.setAttribute("fill",r),o.setAttribute("fill-opacity",e),!0==t&&this.options.onInput.call(this)},updateCursorThumb:function(){let{palette:t,cursor:e}=this.DOM,{s:i,v:s}=this.__c.hsv;e.style.translate=`${i/100*t.offsetWidth}px ${t.offsetHeight-s/100*t.offsetHeight}px`},buildCopyColor:function(){let t=_gui_.createElement("span"),e=_gui_.createElement("button",["cp-clipboard-color"]),i=_gui_.createElement("input");return e.style.setProperty("background-image",this.copyIcon),e.addEventListener("click",_event_.onClickCopyColor.bind(this)),i.setAttribute("tabindex","-1"),i.setAttribute("style","opacity: 0 !important;position: absolute !important;pointer-events: none !important"),t.appendChild(e),t.appendChild(i),this.DOM.copyColor=e,this.DOM.hiddenInput=i,t},buildColorSliders:function(){let t=_gui_.createElement("div",["cp-sliders"]);return t.appendChild(_gui_.buildHueSlider.call(this)),t.appendChild(_gui_.buildOpacitySlider.call(this)),t},buildHueSlider:function(){let t=_gui_.createElement("div",["cp-hue-slider-wrapper"]),e=_gui_.createElement("div",["cp-hue-slider"]),i=_gui_.createElement("a",["cp-hue-slider-thumb"]);return i.setAttribute("tabindex","0"),t.appendChild(e),t.appendChild(i),this.__onMouseDownHueSlider=_event_.onMouseDownHueSlider.bind(this),this.__onMouseUpHueSlider=_event_.onMouseUpHueSlider.bind(this),this.__onMouseMoveHueSlider=_event_.onMouseMoveHueSlider.bind(this),t.addEventListener("mousedown",this.__onMouseDownHueSlider),i.addEventListener("keydown",_event_.onKeyDownHueSlider.bind(this)),this.DOM.hueSlider=e,this.DOM.hueThumb=i,t},buildOpacitySlider:function(){let t=_gui_.createElement("div",["cp-opacity-slider-wrapper"]),e=_gui_.createElement("div",["cp-opacity-color"]),i=_gui_.createElement("a",["cp-opacity-slider-thumb"]);return i.setAttribute("tabindex","0"),t.appendChild(e),t.appendChild(i),this.__onMouseDownOpacitySlider=_event_.onMouseDownOpacitySlider.bind(this),this.__onMouseUpOpacitySlider=_event_.onMouseUpOpacitySlider.bind(this),this.__onMouseMoveOpacitySlider=_event_.onMouseMoveOpacitySlider.bind(this),t.addEventListener("mousedown",this.__onMouseDownOpacitySlider),i.addEventListener("keydown",_event_.onKeyDownOpacitySlider.bind(this)),this.DOM.opacitySlider=e,this.DOM.opacityThumb=i,t},buildColorPreview:function(){let t=_gui_.createElement("span",["cp-color-preview-wrapper"]),e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("width",38),e.setAttribute("height",38);let i=document.createElementNS("http://www.w3.org/2000/svg","circle");return i.setAttribute("cx",19),i.setAttribute("cy",19),i.setAttribute("r",18),i.setAttribute("stroke","gray"),e.innerHTML='<defs><pattern id="transparent-grid" x="0" y="0" width="6" height="6" patternUnits="userSpaceOnUse"><path fill="#DBDBDB" d="M0 0h3v3H0z"/><path fill="#fff" d="M3 0h3v3H3z"/><path fill="#DBDBDB" d="M3 3h3v3H3z"/><path fill="#fff" d="M0 3h3v3H0z"/></pattern></defs><circle cx="19" cy="19" r="18" fill="url(#transparent-grid)"/>',e.appendChild(i),t.appendChild(e),this.DOM.colorPreview=i,t},createElement:function(t,e){let i=document.createElement(t);return null!=e&&i.classList.add(...e),i},rgbUpdateView:function(){_gui_.updateColorPreview.call(this,!0),_gui_.updateHueThumb.call(this),_gui_.updateCursorThumb.call(this)},updateHEXColorSection:function(t,e,i,s,n,o,l){let{target:r}=e,{rgb:h,hex:a}=this.__c;if(i(h[t],s)){h[t]=n(h[t],1),this.__c.hex=a.substring(0,o)+_util_.hexPad2(h[t])+a.substring(l);let{r:u,g:c,b:d}=h;this.__c.hsv=this.__c.RGBtoHSV(u,c,d),_gui_.rgbUpdateView.call(this)}r.value=this.__c.hex,r.setSelectionRange(o,l),e.preventDefault()},updateHEXAlphaSection:function(t,e,i,s){let{target:n}=t,{hex:o,a:l}=this.__c;e(l,i)&&(this.__c.a=parseFloat(s(l,.01).toFixed(2)),n.value=this.__c.hex=o.substring(0,7)+_util_.hexPad2(255*this.__c.a),_gui_.updateColorPreview.call(this,!0),_gui_.updateOpacityThumb.call(this)),n.value=this.__c.hex,n.setSelectionRange(7,9),t.preventDefault()},updateOpacityValue:function(t){this.__c.a=parseFloat(t.toFixed(2)),"hex"==this.currentRepresentation?(_core_.updateHEXColor.call(this),_gui_.updateHEXInput.call(this)):this.DOM.inputAlpha.value=this.__c.a,_gui_.updateColorPreview.call(this,!0)},updatePosition:function(){let{x:t,y:e}=_core_.getPositionAxis.call(this);t=t<0?0:t,e=e<0?0:e,_core_.setPositionAxis.call(this,{x:t,y:e})},attachToContainer:function(){let t=document.getElementById(this.options.container);if(null==t)throw ReferenceError("ColorPicker:: container to set color picker is undefined");this.DOM.overlayWrapper.classList.add("cp-overlay-wrapper--static"),t.appendChild(this.DOM.overlayWrapper),null==this.__c&&(this.color=this.options.color),_gui_.updateGUI.call(this),this.isOpen=!0},attachToBody:function(){null==this.__c&&(this.color=this.options.color),this.DOM.overlayWrapper.classList.remove("cp-overlay-wrapper--static"),document.body.appendChild(this.DOM.overlayWrapper),_gui_.updateGUI.call(this),_gui_.updatePosition.call(this),window.addEventListener("resize",this.__onResizeScrollWindow),window.addEventListener("scroll",this.__onResizeScrollWindow),document.addEventListener("keyup",this.__onKeyUpClose),document.addEventListener("click",this.__onClickClose),this.isOpen=!0},detachFromBody:function(){let t=this.DOM.overlayWrapper.parentElement;null!=t&&(window.removeEventListener("resize",this.__onResizeScrollWindow),window.removeEventListener("scroll",this.__onResizeScrollWindow),document.removeEventListener("keyup",this.__onKeyUpClose),document.removeEventListener("click",this.__onClickClose),t.removeChild(this.DOM.overlayWrapper),this.isOpen=!1)}},_event_={onClickTarget:function(t){switch(t.stopPropagation(),this.isOpen){case!1:this.open();break;case!0:this.close()}},onMouseDownCursor:function(t){this.__dc=!0,document.addEventListener("mousemove",this.__onMouseMoveCursor),document.addEventListener("mouseup",this.__onMouseUpCursor),this.__onMouseMoveCursor(t)},onMouseUpCursor:function(t){document.removeEventListener("mousemove",this.__onMouseMoveCursor),document.removeEventListener("mouseup",this.__onMouseUpCursor),this.DOM.overlayWrapper.contains(t.target)&&(this.__dc=!1)},onMouseMoveCursor:function(t){let{x:e,y:i}=_core_.getCursorPosition.call(this,t.clientX,t.clientY);this.DOM.cursor.style.translate=`${e}px ${i}px`;let s=this.DOM.palette.offsetHeight,n=this.DOM.palette.offsetWidth;this.__c.hsv.s=e/n*100,this.__c.hsv.v=(s-i)/s*100,_gui_.updateSettingsView.call(this)},onClickInputsSwitch:function(){switch(this.currentRepresentation){case"rgb":this.currentRepresentation="hsv";break;case"hsv":this.currentRepresentation="hsl";break;case"hsl":this.currentRepresentation="hex";break;case"hex":this.currentRepresentation="rgb"}},onFocusInput:function(){switch(this.currentRepresentation){case"rgb":this.__c.rgb=this.getRGB();break;case"hsv":this.__c.hsv=this.getHSV();break;case"hsl":this.__c.hsl=this.getHSL();break;case"hex":_core_.updateHEXColor.call(this)}},onKeyDownAlphaInput:function(t){let{target:e,key:i}=t,{a:s}=this.__c;switch(i){case"ArrowUp":if(s<1){let n=parseFloat((s+.01).toFixed(2));n>1&&(n=1),e.value=this.__c.a=n,_gui_.updateColorPreview.call(this,!0),_gui_.updateOpacityThumb.call(this)}break;case"ArrowDown":if(s>0){let o=parseFloat((s-.01).toFixed(2));o<0&&(o=0),e.value=this.__c.a=o,_gui_.updateColorPreview.call(this,!0),_gui_.updateOpacityThumb.call(this)}break;case".":/(\.)/.test(e.value)&&t.preventDefault()}},onKeyUpAlphaInput:function(t){let{target:e}=t;if(/^(0(\.\d{1,2})?|(0*)1?)$/.test(e.value)||""==e.value){let i=parseFloat(e.value)||0;!isNaN(i)&&i>=0&&i<=1&&(this.__c.a=i,_gui_.updateColorPreview.call(this,!0),_gui_.updateOpacityThumb.call(this))}},onChangeAlphaInput:function(t){t.target.value=this.__c.a},onKeyDownInputHEX:function(t){let{target:e,key:i}=t;switch(i){case"ArrowUp":{/^#([0-9a-f]{3}|[0-9a-f]{4}|[0-9a-f]{6}|[0-9a-f]{8})$/i.test(e.value)||(e.value=this.__c.hex);let s=_core_.getCaretPosition(e),n=e.value.length;n<=5?s<2?_gui_.updateHEXColorSection.call(this,"r",t,_util_.lt,255,_util_.add,1,3):s<3?_gui_.updateHEXColorSection.call(this,"g",t,_util_.lt,255,_util_.add,3,5):s<=4&&n<=4||s<4?_gui_.updateHEXColorSection.call(this,"b",t,_util_.lt,255,_util_.add,5,7):s<=5&&_gui_.updateHEXAlphaSection.call(this,t,_util_.lt,1,_util_.add):s<3?_gui_.updateHEXColorSection.call(this,"r",t,_util_.lt,255,_util_.add,1,3):s<5?_gui_.updateHEXColorSection.call(this,"g",t,_util_.lt,255,_util_.add,3,5):s<=7&&7==n||s<7?_gui_.updateHEXColorSection.call(this,"b",t,_util_.lt,255,_util_.add,5,7):s<=9&&_gui_.updateHEXAlphaSection.call(this,t,_util_.lt,1,_util_.add)}break;case"ArrowDown":{/^#([0-9a-f]{3}|[0-9a-f]{4}|[0-9a-f]{6}|[0-9a-f]{8})$/i.test(e.value)||(e.value=this.__c.hex);let o=_core_.getCaretPosition(e),l=e.value.length;l<=5?o<2?_gui_.updateHEXColorSection.call(this,"r",t,_util_.gt,0,_util_.sub,1,3):o<3?_gui_.updateHEXColorSection.call(this,"g",t,_util_.gt,0,_util_.sub,3,5):o<=4&&l<=4||o<4?_gui_.updateHEXColorSection.call(this,"b",t,_util_.gt,0,_util_.sub,5,7):o<=5&&_gui_.updateHEXAlphaSection.call(this,t,_util_.gt,0,_util_.sub):o<3?_gui_.updateHEXColorSection.call(this,"r",t,_util_.gt,0,_util_.sub,1,3):o<5?_gui_.updateHEXColorSection.call(this,"g",t,_util_.gt,0,_util_.sub,3,5):o<=7&&7==l||o<7?_gui_.updateHEXColorSection.call(this,"b",t,_util_.gt,0,_util_.sub,5,7):o<=9&&_gui_.updateHEXAlphaSection.call(this,t,_util_.gt,0,_util_.sub)}}},onInputHEX:function(t){let e=this.__c.HEXtoRGBA(t.target.value.trim());if(null!=e){let{r:i,g:s,b:n,a:o}=e;this.__c.a=o,this.__c.rgb={r:i,g:s,b:n},this.__c.hex=this.__c.RGBAtoHEX(i,s,n,o),this.__c.hsv=this.__c.RGBtoHSV(i,s,n),_gui_.updateColorPreview.call(this,!0),_gui_.updateHueThumb.call(this),_gui_.updateOpacityThumb.call(this),_gui_.updateCursorThumb.call(this)}},onChangeInputHEX:function(t){t.target.value=this.__c.hex},onKeyDownInputA:function(t){let{target:e,key:i}=t;switch(i){case"ArrowUp":switch(this.currentRepresentation){case"rgb":{let{r:s,g:n,b:o}=this.__c.rgb;(s=Math.round(s))<255&&(this.__c.rgb.r=e.value=++s,this.__c.hsv=this.__c.RGBtoHSV(s,n,o),_gui_.rgbUpdateView.call(this))}break;case"hsv":case"hsl":{let{h:l}=this.__c.hsv;(l=Math.round(l))<360&&(e.value=++l+"\xb0",this.__c.hsv.h=this.__c.hsl.h=l,_gui_.updateColorPreview.call(this,!0),_gui_.updateHueThumb.call(this))}}break;case"ArrowDown":switch(this.currentRepresentation){case"rgb":{let{r,g:h,b:a}=this.__c.rgb;(r=Math.round(r))>0&&(this.__c.rgb.r=e.value=--r,this.__c.hsv=this.__c.RGBtoHSV(r,h,a),_gui_.rgbUpdateView.call(this))}break;case"hsv":case"hsl":{let{h:u}=this.__c.hsv;(u=Math.round(u))>0&&(e.value=--u+"\xb0",this.__c.hsv.h=this.__c.hsl.h=u,_gui_.updateColorPreview.call(this,!0),_gui_.updateHueThumb.call(this))}}}},onInputA:function(t){let e=parseInt(t.target.value||0);if(/^(\d{1,3})(Â°?)$/.test(e))switch(this.currentRepresentation){case"rgb":{let{g:i,b:s}=this.__c.rgb;!isNaN(e)&&e>=0&&e<=255&&(this.__c.rgb.r=e,this.__c.hsv=this.__c.RGBtoHSV(e,i,s),_gui_.updateColorPreview.call(this,!0),_gui_.updateHueThumb.call(this),_gui_.updateCursorThumb.call(this))}break;case"hsv":case"hsl":!isNaN(e)&&e>=0&&e<=360&&(this.__c.hsv.h=this.__c.hsl.h=e,_gui_.updateColorPreview.call(this,!0),_gui_.updateHueThumb.call(this))}},onChangeInputA:function(t){let e=t.target.value;switch(this.currentRepresentation){case"rgb":e=Math.round(this.__c.rgb.r);break;case"hsv":case"hsl":e=`${Math.round(this.__c.hsv.h)}\xb0`}t.target.value=e},onKeyDownInputB:function(t){let{target:e,key:i}=t;switch(i){case"ArrowUp":switch(this.currentRepresentation){case"rgb":{let{r:s,g:n,b:o}=this.__c.rgb;(n=Math.round(n))<255&&(this.__c.rgb.g=e.value=++n,this.__c.hsv=this.__c.RGBtoHSV(s,n,o),_gui_.rgbUpdateView.call(this))}break;case"hsv":{let{s:l}=this.__c.hsv;(l=Math.round(l))<100&&(e.value=++l+"%",this.__c.hsv.s=l,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}break;case"hsl":{let{h:r,s:h,l:a}=this.__c.hsl,u=Math.round(h);u<100&&(e.value=++u+"%",this.__c.hsl.s=u,this.__c.hsv.s=this.__c.HSLtoHSV(r,u,a).s,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}}break;case"ArrowDown":switch(this.currentRepresentation){case"rgb":{let{r:c,g:d,b:p}=this.__c.rgb;(d=Math.round(d))>0&&(this.__c.rgb.g=e.value=--d,this.__c.hsv=this.__c.RGBtoHSV(c,d,p),_gui_.rgbUpdateView.call(this))}break;case"hsv":{let{s:$}=this.__c.hsv;($=Math.round($))>0&&(e.value=--$+"%",this.__c.hsv.s=$,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}break;case"hsl":{let{h:v,s:g,l:b}=this.__c.hsl,_=Math.round(g);_>0&&(e.value=--_+"%",this.__c.hsl.s=_,this.__c.hsv.s=this.__c.HSLtoHSV(v,_,b).s,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}}}},onInputB:function(t){let e=parseInt(t.target.value||0);if(/^(\d{1,3})(%?)$/.test(e))switch(this.currentRepresentation){case"rgb":{let{r:i,b:s}=this.__c.rgb;!isNaN(e)&&e>=0&&e<=255&&(this.__c.rgb.g=e,this.__c.hsv=this.__c.RGBtoHSV(i,e,s),_gui_.updateColorPreview.call(this,!0),_gui_.updateHueThumb.call(this),_gui_.updateCursorThumb.call(this))}break;case"hsv":!isNaN(e)&&e>=0&&e<=100&&(this.__c.hsv.s=e,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this));break;case"hsl":{let{h:n,l:o}=this.__c.hsl;!isNaN(e)&&e>=0&&e<=100&&(this.__c.hsl.s=e,this.__c.hsv=this.__c.HSLtoHSV(n,e,o),_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}}},onChangeInputB:function(t){let e=t.target.value;switch(this.currentRepresentation){case"rgb":e=Math.round(this.__c.rgb.g);break;case"hsv":e=`${Math.round(this.__c.hsv.s)}%`;break;case"hsl":e=`${Math.round(this.__c.hsl.s)}%`}t.target.value=e},onKeyDownInputC:function(t){let{target:e,key:i}=t;switch(i){case"ArrowUp":switch(this.currentRepresentation){case"rgb":{let{r:s,g:n,b:o}=this.__c.rgb;(o=Math.round(o))<255&&(this.__c.rgb.b=e.value=++o,this.__c.hsv=this.__c.RGBtoHSV(s,n,o),_gui_.rgbUpdateView.call(this))}break;case"hsv":{let{v:l}=this.__c.hsv;(l=Math.round(l))<100&&(e.value=++l+"%",this.__c.hsv.v=l,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}break;case"hsl":{let{h:r,s:h,l:a}=this.__c.hsl,u=Math.round(a);u<100&&(e.value=++u+"%",this.__c.hsl.l=u,this.__c.hsv.v=this.__c.HSLtoHSV(r,h,u).v,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}}break;case"ArrowDown":switch(this.currentRepresentation){case"rgb":{let{r:c,g:d,b:p}=this.__c.rgb;(p=Math.round(p))>0&&(this.__c.rgb.b=e.value=--p,this.__c.hsv=this.__c.RGBtoHSV(c,d,p),_gui_.rgbUpdateView.call(this))}break;case"hsv":{let{v:$}=this.__c.hsv;($=Math.round($))>0&&(e.value=--$+"%",this.__c.hsv.v=$,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}break;case"hsl":{let{h:v,s:g,l:b}=this.__c.hsl,_=Math.round(b);b>0&&(e.value=--_+"%",this.__c.hsl.l=_,this.__c.hsv.v=this.__c.HSLtoHSV(v,g,_).v,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}}}},onInputC:function(t){let e=parseInt(t.target.value||0);if(/^(\d{1,3})(%?)$/.test(e))switch(this.currentRepresentation){case"rgb":{let{r:i,g:s}=this.__c.rgb;!isNaN(e)&&e>=0&&e<=255&&(this.__c.rgb.b=e,this.__c.hsv=this.__c.RGBtoHSV(i,s,e),_gui_.updateColorPreview.call(this,!0),_gui_.updateHueThumb.call(this),_gui_.updateCursorThumb.call(this))}break;case"hsv":!isNaN(e)&&e>=0&&e<=100&&(this.__c.hsv.v=e,_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this));break;case"hsl":{let{h:n,s:o}=this.__c.hsl;!isNaN(e)&&e>=0&&e<=100&&(this.__c.hsl.l=e,this.__c.hsv=this.__c.HSLtoHSV(n,o,e),_gui_.updateColorPreview.call(this,!0),_gui_.updateCursorThumb.call(this))}}},onChangeInputC:function(t){let e=t.target.value;switch(this.currentRepresentation){case"rgb":e=Math.round(this.__c.rgb.b);break;case"hsv":e=`${Math.round(this.__c.hsv.v)}%`;break;case"hsl":e=`${Math.round(this.__c.hsl.l)}%`}t.target.value=e},onClickCopyColor:function(){this.DOM.hiddenInput.value=_core_.getColorText.call(this),this.DOM.hiddenInput.select(),document.execCommand("copy"),this.options.onCopy.call(this),this.DOM.copyColor.style.setProperty("background-image","url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' width='14' height='14'%3E%3Cpath fill='%23bcbcbc' d='M15.2 4.7c.3-.3.2-.7-.1-1l-.8-.8c-.3-.3-.7-.2-1 .1l-6.7 7.5-4.1-3.8c-.3-.3-.7-.2-1 .1l-.8.8c-.3.3-.2.7.1 1l5.5 5c.3.3.7.2 1-.1l7.9-8.8z'/%3E%3C/svg%3E\")"),setTimeout(()=>{this.DOM.copyColor.style.setProperty("background-image",this.copyIcon)},600)},onMouseDownHueSlider:function(t){t.preventDefault(),this.__dc=!0,document.addEventListener("mousemove",this.__onMouseMoveHueSlider),document.addEventListener("mouseup",this.__onMouseUpHueSlider),this.DOM.hueThumb.focus(),this.__onMouseMoveHueSlider(t)},onMouseUpHueSlider:function(t){document.removeEventListener("mousemove",this.__onMouseMoveHueSlider),document.removeEventListener("mouseup",this.__onMouseUpHueSlider),this.DOM.overlayWrapper.contains(t.target)&&(this.__dc=!1)},onMouseMoveHueSlider:function(t){let{hueSlider:e,hueThumb:i}=this.DOM,s=e.getBoundingClientRect(),n=s.width,o=t.clientX-s.left;o<0&&(o=0),o>n&&(o=n),this.__c.hsv.h=o/s.width*360,i.style.translate=`${o}px`,_gui_.updateSettingsView.call(this)},onMouseDownOpacitySlider:function(t){t.preventDefault(),this.__dc=!0,document.addEventListener("mousemove",this.__onMouseMoveOpacitySlider),document.addEventListener("mouseup",this.__onMouseUpOpacitySlider),this.DOM.opacityThumb.focus(),this.__onMouseMoveOpacitySlider(t)},onMouseUpOpacitySlider:function(t){document.removeEventListener("mousemove",this.__onMouseMoveOpacitySlider),document.removeEventListener("mouseup",this.__onMouseUpOpacitySlider),this.DOM.overlayWrapper.contains(t.target)&&(this.__dc=!1)},onMouseMoveOpacitySlider:function(t){let{opacitySlider:e,opacityThumb:i}=this.DOM,s=e.getBoundingClientRect(),n=s.width,o=t.clientX-s.left;i.focus(),o<0&&(o=0),o>n&&(o=n),i.style.translate=`${o}px`,_gui_.updateOpacityValue.call(this,o/n)},onKeyDownHueSlider:function(t){let{key:e}=t;switch(e){case"ArrowUp":case"ArrowRight":{let{hueThumb:i,hueSlider:s}=this.DOM,n=parseInt(i.style.translate);!isNaN(n)&&n<s.offsetWidth&&(i.style.translate=`${++n}px`,this.__c.hsv.h=n/s.offsetWidth*360,_gui_.updateSettingsView.call(this)),t.preventDefault()}break;case"ArrowDown":case"ArrowLeft":{let{hueThumb:o,hueSlider:l}=this.DOM,r=parseInt(o.style.translate);!isNaN(r)&&r>0&&(o.style.translate=`${--r}px`,this.__c.hsv.h=r/l.offsetWidth*360,_gui_.updateSettingsView.call(this)),t.preventDefault()}}},onKeyDownOpacitySlider:function(t){let{key:e}=t;switch(e){case"ArrowUp":case"ArrowRight":{let{opacityThumb:i,opacitySlider:s}=this.DOM,n=parseInt(i.style.translate);!isNaN(n)&&n<s.offsetWidth&&(i.style.translate=`${++n}px`,_gui_.updateOpacityValue.call(this,n/s.offsetWidth)),t.preventDefault()}break;case"ArrowDown":case"ArrowLeft":{let{opacityThumb:o,opacitySlider:l}=this.DOM,r=parseInt(o.style.translate);!isNaN(r)&&r>0&&(o.style.translate=`${--r}px`,_gui_.updateOpacityValue.call(this,r/l.offsetWidth)),t.preventDefault()}}},onKeyUpClose:function(t){t.key==this.options.closeKey&&this.close()},onResizeScrollWindow:function(t){let{type:e}=t,{closeOnScroll:i,closeOnResize:s}=this.options;if("scroll"==e&&i||"resize"==e&&s)this.close();else{let{x:n,y:o}=_core_.getPositionAxis.call(this);"scroll"!=e&&(n=n<0?0:n,o=o<0?0:o),_core_.setPositionAxis.call(this,{x:n,y:o})}}};function Color(t,e,i,s){this.a=s,this.hsv={h:t,s:e,v:i},this.rgb=this.toRGB(),this.hsl=this.toHSL(),this.hex=this.toHEX()}Color.prototype.toRGB=function(){var t,e,i,s,n,o,l,r;let{h,s:a,v:u}=this.hsv;switch(h/=360,a/=100,u/=100,s=Math.floor(6*h),n=6*h-s,o=u*(1-a),l=u*(1-n*a),r=u*(1-(1-n)*a),s%6){case 0:t=u,e=r,i=o;break;case 1:t=l,e=u,i=o;break;case 2:t=o,e=u,i=r;break;case 3:t=o,e=l,i=u;break;case 4:t=r,e=o,i=u;break;case 5:t=u,e=o,i=l}return{r:255*t,g:255*e,b:255*i}},Color.prototype.toHSL=function(){let{h:t,s:e,v:i}=this.hsv,s=.01*i,n=s-s*(.01*e)/2,o=NaN;return{h:t,s:e=o=0==n||1==n?0:(s-n)/Math.min(n,1-n)*100,l:100*n}},Color.prototype.toHEX=function(){let{r:t,g:e,b:i}=this.toRGB();return this.RGBAtoHEX(t,e,i,this.a)},Color.prototype.RGBtoHSV=function(t,e,i){t/=255;let s=Math.max(t,e/=255,i/=255),n=Math.min(t,e,i),o,l,r=s,h=s-n;if(l=0==s?0:h/s,s==n)o=0;else{switch(s){case t:o=(e-i)/h+(e<i?6:0);break;case e:o=(i-t)/h+2;break;case i:o=(t-e)/h+4}o/=6}return o*=360,l*=100,r*=100,{h:o,s:l,v:r}},Color.prototype.HSLtoHSV=function(t,e,i){let s=e*(i<50?i:100-i)/100;return{h:t,s:0===s?0:2*s/(i+s)*100,v:i+s}},Color.prototype.HEXtoRGBA=function(t){let e=0,i=0,s=0,n=0;if(/^#(([a-f0-9]){3,4}|([a-f0-9]){6}|([a-f0-9]){8})$/i.test(t)){if(t.length<6){let o=t.split("");e=+("0x"+o[1]+o[1]),i=+("0x"+o[2]+o[2]),s=+("0x"+o[3]+o[3]),n=o[4]?parseFloat((+("0x"+o[4]+o[4])/255).toFixed(2)):1}else if(t.length<10){let l=t.split(/([a-f0-9]{2})/i);e=+("0x"+l[1]),i=+("0x"+l[3]),s=+("0x"+l[5]),n=l[7]?parseFloat((+("0x"+l[7])/255).toFixed(2)):1}return{r:e,g:i,b:s,a:n}}},Color.prototype.RGBAtoHEX=function(t,e,i,s){return t=_util_.hexPad2(Math.round(t)),e=_util_.hexPad2(Math.round(e)),"#"+t+e+(i=_util_.hexPad2(Math.round(i)))+(s=1==s?"":_util_.hexPad2(Math.round(255*s)))};